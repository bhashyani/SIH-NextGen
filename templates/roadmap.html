<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ career.title }} Roadmap</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <div class="container">
        <h1>🎯 {{ career.title }} Career Roadmap</h1>

        <div id="timeline"></div>
    </div>

    <script>
    const roadmap = {{ career.roadmap | tojson }};
    const stages = roadmap.map(r => r.stage);
    const descriptions = roadmap.map(r => r.description);
    const icons = roadmap.map(r => r.icon);
    const skills = roadmap.map(r => r.skills.join(", "));
    const resources = roadmap.map(r => r.resources.map(link => `<a href='${link}' target='_blank'>Link</a>`).join(" | "));

    // Build Plotly timeline as horizontal bar chart
    const data = [{
        x: Array(stages.length).fill(1),
        y: stages,
        text: descriptions.map((d,i) => `${icons[i]} <b>${stages[i]}</b><br>${d}<br>Skills: ${skills[i]}<br>${resources[i]}`),
        type: 'bar',
        orientation: 'h',
        marker: {color: '#6A00FF'},
        hoverinfo: 'text'
    }];

    const layout = {
        title: '',
        height: 400,
        yaxis: {autorange: "reversed"},
        xaxis: {visible: false},
        margin: {l: 150, r: 50, t: 50, b: 50}
    };

    Plotly.newPlot('timeline', data, layout, {responsive: true});
    </script>
</body>
</html>
